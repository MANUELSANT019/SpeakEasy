<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Voz</title>
    <link rel="stylesheet" type="text/css" href="styleconfig.css">
  </head>

  <body>
	<header class="header">
		<div class="header-logo">
           <h1>Configuration</h1> 
    </div>
   </header>
   <nav>
    <ul>
       <li><a href="config.html">Configuration</a></li> 
      <li><a href="index2.html">Menu</a></li>
      <li><a href="index.html">aplicacion</a></li>
    </ul>
  </nav> 
<div class="nom">
<label for="nombre">enter your name:</label>
<input type="text" id="nombre" />
<button class="boton" onclick="guardarNombre()">SAVE</button>
</div>
<script>
const reconocimientoVoz = window.speechRecognition || window.webkitSpeechRecognition;
const reconocimiento = new reconocimientoVoz();

reconocimiento.onresult = function (event) {
const voz = event.results[0][0].transcript;
const mensaje = `Hello ${nombre},  I hope you are having a good day. the system has been configured correctly.`;
const sintetizador = new SpeechSynthesisUtterance(mensaje);
sintetizador.lang = 'en-US';
window.speechSynthesis.speak(sintetizador);
};

function guardarNombre() {
const nombre = document.getElementById("nombre").value;
const mensaje = `Hello ${nombre}, I hope you are having a good day. the system has been configured correctly.`;
const sintetizador = new SpeechSynthesisUtterance(mensaje);
sintetizador.lang = 'en-US';
window.speechSynthesis.speak(sintetizador);
}

function activarVoz() {
reconocimiento.start();
}
</script>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Activar cámara y probar micrófono</title>
  </head>
  <body>
    <video id="video" autoplay></video>
    <br>
    <button id="startCamera">Activar cámara</button>
    <button id="stopCamera">Desactivar cámara</button>
    <button id="testMicrophone">Probar micrófono</button>
    <script>
      const startCameraButton = document.getElementById('startCamera');
      const stopCameraButton = document.getElementById('stopCamera');
      const testMicrophoneButton = document.getElementById('testMicrophone');
      const video = document.getElementById('video');
      let mediaStream = null;
      const constraints = { video: true };

      function startCamera() {
        navigator.mediaDevices.getUserMedia(constraints)
          .then(stream => {
            video.srcObject = stream;
            mediaStream = stream;
          })
          .catch(error => console.log(error));
      }

      function stopCamera() {
        if (mediaStream) {
          mediaStream.getTracks().forEach(track => {
            track.stop();
          });
          mediaStream = null;
        }
      }

      function testMicrophone() {
        navigator.mediaDevices.getUserMedia({ audio: true })
          .then(stream => {
            const audioContext = new AudioContext();
            const source = audioContext.createMediaStreamSource(stream);
            const analyser = audioContext.createAnalyser();
            source.connect(analyser);
            analyser.fftSize = 2048;
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            analyser.getByteTimeDomainData(dataArray);
            if (dataArray.some(value => value !== 128)) {
              console.log('El micrófono está sonando');
            } else {
              console.log('El micrófono no está sonando');
            }
            stream.getTracks().forEach(track => track.stop());
          })
          .catch(error => console.log(error));
      }

      startCameraButton.addEventListener('click', startCamera);
      stopCameraButton.addEventListener('click', stopCamera);
      testMicrophoneButton.addEventListener('click', testMicrophone);
    </script>
  </body>
</html>

  </body>
</html>

